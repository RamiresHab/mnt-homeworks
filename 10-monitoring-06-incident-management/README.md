# Домашнее задание к занятию "17.Инцидент-менеджмент"

## Задание 1

Составьте постмортем, на основе реального сбоя системы Github в 2018 году.

Информация о сбое доступна [в виде краткой выжимки на русском языке](https://habr.com/ru/post/427301/) , а
также [развёрнуто на английском языке](https://github.blog/2018-10-30-oct21-post-incident-analysis/).


---

### Как оформить ДЗ?

Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.

---

### Решение
21 Октября 2018 года с 22:52 UTC по 22 октября 2018 23:03 UTC был сбой баз данных на github. Пользователи жаловались о пропадании опубликованных комментариев и появлению появлению непоследовательной информации на сайте. 

Событие было вызвано тем, что в 22.52 во время плановой замены 100гб оптического оборудования была потеряна связность между US East Coast network hub и главным US East Coast data center. Связность была восстановлена через 43 секунды, но это кратковременное отключение спровоцировало цепочку событий, которая привела к деградации сервиса на 24 часа 11 минут.

Оркестратор начал RAFT голосование и выбрал новые primary сервера. Когда подключение было восстановлено, клиенты немедленно начали направлять трафик на новые первичные серверы в датацентры West Coast.

Серверы баз данных в центре обработки данных на восточном побережье США содержали короткий период записи, который не был реплицирован на объект на западном побережье США. Поскольку кластеры баз данных в обоих центрах обработки данных теперь содержали записи, которых не было в другом центре обработки данных, не удалось безопасно выполнить возврат основного сервера в центр обработки данных на восточном побережье США.

21 октября в 23:07 UTC инженеры заблокировали внесение изменений и поместили сайт в жёлтый статус. Это действие втоматически оповестило координатора инцидентов. в 23.11 координатор присоединился к решению проблемы и сменил статус на красный. В 23.13 к решению задачи подключились инженеры БД. Было принято решение сохранить целостность пользовательских данных. В 00:05 UTC приняли решение восстановиться из резерных копий, синхронизировать реплики на обоих сайтах и возобновить обработку заданий в очереди. Время, необходимое для восстановления нескольких терабайт данных резервной копии, привело к тому, что процесс занял несколько часов. Значительная часть времени ушла на перенос данных из службы удаленного резервного копирования. 

В 11:12 UTC Все базы данных восстановлены из бэкапа на сайте восточном побережье США.

В 13:15 UTC предоставлены дополнительные реплики кластера СУБД на сайте восточного побережья США для ускорения работы кластера.

В 16:24 UTC реплики синхронизированы, выполнено аварийное переключение на исходную топологию.

В 16:45 включена обработка очереди БД на запись

В 23:03 UTC обработка очереди завершена, работоспособность системы восстановлена

Этот инцидент был обнаружен 21 октября в 23:07 UTC, имел красный уровень и затронул всех пользователей системы. 

Этот инцидент изменил наше отношение к надежности сайта. Мы узнали, что более строгий операционный контроль или сокращение времени отклика не являются достаточными гарантиями надежности сайта в рамках такой сложной системы служб, как наша. Чтобы поддержать эти усилия, мы также начнем системную практику проверки сценариев сбоев, прежде чем они смогут повлиять на вас. Эта работа потребует будущих инвестиций в инструменты внедрения ошибок и хаос-инжиниринга в GitHub.
